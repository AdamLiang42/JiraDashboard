
@model JiraDashboard.Models.JiraDBContext
@{
    ViewData["Title"] = "Jira";
}
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.2.2/Chart.bundle.min.js"></script>
    <script type="text/javascript">

        var barChartData = {
              labels: @Json.Serialize(Model.GraphLabel),
              datasets: [
                {
                  label: "Last 4 weeks",
                  backgroundColor: "#5B9BD5",
                  borderWidth: 1,
                  data: @Json.Serialize(Model.GraphMonthlyTask)
                },
                {
                  label: "Last 12 Months",
                  backgroundColor: "#A5A5A5",
                  borderWidth: 1,
                  data: @Json.Serialize(Model.GraphYTDTask)
                }
              ]
            };

            window.onload = function () {
                var ctx1 = document.getElementById("barcanvas").getContext("2d");
                window.myBar = new Chart(ctx1,
                    {
                        type: 'bar',
                        data: barChartData,
                        options:
                            {
                                title:
                                {
                                    display: true,
                                    text: "Tasks Completed for Projects Last 4 Weeks (Projects with more than 10 new tasks added excluding CLSD)"
                                },
                                responsive: true,
                                maintainAspectRatio: true
                            }
                    });
            }
    </script>
</head>


<h2>Project Tasks (Completed and Current Backlog)</h2>
<div style="text-align: center">
    <canvas id="barcanvas"></canvas>
</div>



<table class="table">
    <tr>
        <th rowspan="2" style="vertical-align:middle;text-align:center;background-color:#DDEBF7">Project</th>
        <th colspan="2" style="vertical-align:middle;text-align:center;background-color:#9BC2E6">Last 4 Weeks</th>
        <th colspan="3" style="vertical-align:middle;text-align:center;background-color:#ACB9CA">Last 12 Months</th>
    </tr>
    <tr>
        <th style="background-color:#DDEBF7">New Tasks Created</th>
        <th style="background-color:#DDEBF7">Completed</th>
        <th style="background-color:#D6DCE4">Tasks Created</th>
        <th style="background-color:#D6DCE4">Completed</th>
        <th style="background-color:#D6DCE4">Backlog</th>
    </tr>
    @foreach (var item in Model.TasksCreatedAndCompletedThisPeriodAndYTD)
    {
    <tr>
        <td>@Html.DisplayTextFor(modelItem => item.Project)</td>
        <td>@Html.DisplayTextFor(modelItem => item.TasksCreatedThisMonth)</td>
        <td>@Html.DisplayTextFor(modelItem => item.Completed)</td>
        <td>@Html.DisplayTextFor(modelItem => item.TasksCreatedYTD)</td>
        <td>@Html.DisplayTextFor(modelItem => item.TasksCompletedYTD)</td>
        <td>@Html.DisplayTextFor(modelItem => item.Backlog)</td>
    </tr>
    }
    <tr style="background-color:#DDEBF7">
        <th>@Html.DisplayTextFor(modelItem => Model.TotalCount.Project)</th>
        <th>@Html.DisplayTextFor(modelItem => Model.TotalCount.TasksCreatedThisMonth)</th>
        <th>@Html.DisplayTextFor(modelItem => Model.TotalCount.Completed)</th>
        <th>@Html.DisplayTextFor(modelItem => Model.TotalCount.TasksCreatedYTD)</th>
        <th>@Html.DisplayTextFor(modelItem => Model.TotalCount.TasksCompletedYTD)</th>
        <th>@Html.DisplayTextFor(modelItem => Model.TotalCount.Backlog)</th>
    </tr>
    <!--
        @foreach (var item in Model.MoreThan10)
    {
        <tr>
            <th>@Html.DisplayTextFor(modelItem => item.Project)</th>
            <th>@Html.DisplayTextFor(modelItem => item.TasksCreatedThisMonth)</th>
            <th>@Html.DisplayTextFor(modelItem => item.Completed)</th>
            <th>@Html.DisplayTextFor(modelItem => item.TasksCreatedYTD)</th>
            <th>@Html.DisplayTextFor(modelItem => item.TasksCompletedYTD)</th>
            <th>@Html.DisplayTextFor(modelItem => item.Backlog)</th>
        </tr>
    }
    -->

</table>
<!--
    <h1>Logged hours by project</h1>
    <h1>Logged hours by resource</h1>
-->
